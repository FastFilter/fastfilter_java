# FastFilter Java Environment - Linux x86_64
# Copy to .env and customize as needed

# JDK 24 (adjust path for your distribution)
JAVA_HOME=/usr/lib/jvm/java-24-openjdk-amd64
JVM_OPTS=--enable-preview --enable-native-access=ALL-UNNAMED
MAVEN_OPTS=--enable-preview --enable-native-access=ALL-UNNAMED -Xmx4g -Xms2g

# Build Tools
MAVEN_HOME=/usr/share/maven
BAZEL_HOME=/usr/local/bin

# System Compiler
CC=/usr/bin/gcc
CXX=/usr/bin/g++
CFLAGS=-O3 -march=native -mavx2 -Wall -Wextra
CXXFLAGS=-O3 -march=native -mavx2 -Wall -Wextra -std=c++17
LDFLAGS=-L/usr/local/lib64 -L/usr/lib64
CPPFLAGS=-I/usr/local/include -I/usr/include

# Cross-compilation toolchains
ARM64_CC=aarch64-linux-gnu-gcc
ARM64_CXX=aarch64-linux-gnu-g++
ARMHF_CC=arm-linux-gnueabihf-gcc
ARMHF_CXX=arm-linux-gnueabihf-g++

# Library Paths
LIBRARY_PATH=/usr/local/lib64:/usr/lib64:/usr/local/lib:/usr/lib
LD_LIBRARY_PATH=/usr/local/lib64:/usr/lib64:/usr/local/lib:/usr/lib
PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig

# FastFilter Native Libraries
NATIVE_LIB_PATH_LINUX_X86_64=/usr/local/lib64:/usr/lib64:/usr/local/lib:/usr/lib
NATIVE_LIB_PATH_LINUX_ARM64=/usr/lib/aarch64-linux-gnu:/usr/local/lib
NATIVE_LIB_PATH=/usr/local/lib64:/usr/lib64:/usr/local/lib:/usr/lib

# Bazel Configuration
BAZEL_BUILD_OPTS=--jobs=auto --compilation_mode=opt --verbose_failures --copt=-mavx2
BAZEL_CONFIG_LINUX_X86_64=--cpu=k8 --copt=-mavx2
BAZEL_CONFIG_LINUX_ARM64=--cpu=aarch64

# Development Tools
CMAKE_BUILD_TYPE=Release
CMAKE_GENERATOR=Ninja
CMAKE_C_COMPILER=${CC}
CMAKE_CXX_COMPILER=${CXX}
NINJA_JOBS=8

# QEMU for cross-platform testing
QEMU_LD_PREFIX=/usr/aarch64-linux-gnu
QEMU_CPU=cortex-a72

# Testing
TEST_FFI_ENABLED=true
TEST_DOCKER_ENABLED=true
TEST_QEMU_ENABLED=true
DOCKER_DEFAULT_PLATFORM=linux/amd64
DOCKER_BUILDKIT=1

# Performance
JMH_FORKS=3
JMH_WARMUP_ITERATIONS=5
JMH_MEASUREMENT_ITERATIONS=10
JMH_THREADS=4